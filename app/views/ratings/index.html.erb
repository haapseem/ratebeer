<h2>List of ratings</h2>

<p>Total number of ratings:
  <%= @ratings.count %></p>

<ul>
  <% @ratings.each do |rating| %>
    <li>
      <%= rating %>
      <%= link_to rating.user.username, rating.user %></li>
  <% end %>
</ul>

<div class="row">
  <div class="col-4">
    <h3>Top beers</h3>

    <table class="table">
      <tr>
        <th>Beer</th>
        <th>Rating (Average)</th>
      </tr>
      <% @topbeers.each do |b| %>
        <tr>
          <td>
            <%= b.name %>
          </td>
          <td>
            <%= b.average_rating %>
          </td>
        </tr>
      <% end %>
    </table>
  </div>
  <div class="col-4">
    <h3>Top Styles</h3>

    <table class="table">
      <tr>
        <th>Style</th>
        <th>Rating (Average)</th>
      </tr>
      <% @topstyles.each do |s| %>
        <tr>
          <td>
            <%= s.name %>
          </td>
          <td>
            <%= s.average_rating %>
          </td>
        </tr>
      <% end %>
    </table>
  </div>
  <div class="col-4">
    <h3>Top breweries</h3>

    <table class="table">
      <tr>
        <th>Brewery</th>
        <th>Rating (Average)</th>
      </tr>
      <% @topbreweries.each do |b| %>
        <tr>
          <td>
            <%= b.name %>
          </td>
          <td>
            <%= b.average_rating %>
          </td>
        </tr>
      <% end %>
    </table>
  </div>
</div>

  <h3>Most active users</h3>

  <table class="table">
    <tr>
      <th>User</th>
      <th>Ratings</th>
    </tr>
    <% @mostActiveUsers.each do |u| %>
      <tr>
        <td>
          <%= link_to u.username, u %>
        </td>
        <td>
          <%= u.ratings.count || 0 %>
        </td>
      </tr>
    <% end %>
  </table>

<p>
  Recent ratings:
  <ul>
    <% @ratings.recent.each do |rating| %>
      <li>
        <%= rating %>
        by
        <%= link_to rating.user.username, rating.user %>
        at
        <%= rating.created_at %>
      </li>
    <% end %>
  </ul>
</p>
